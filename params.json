{"name":"line_intersection.js","tagline":"A JavaScript library to find the intersection of two straight lines (useful for charting libraries)","body":"# line_intersection.js\r\n\r\nA JavaScript library to find the intersection of two straight lines (useful for charting libraries). Also includes a function that generate trendline from a chart data.\r\n\r\nWritten originally for highcharts but can work with any charting library as long as they support line data in the format\r\n`[[x1, y1], [x2, y2], ... ]` such as [Flot](http://www.flotcharts.org/), [PlotKit](http://www.liquidx.net/plotkit/), [JS Charts](http://www.jscharts.com/) etc.\r\nFor other libraries, you will need to convert the data to this form and back after getting the intersection data.\r\n\r\n## Methods\r\n* **getLineIntersectionData(line1_data, line2_data, user_options)**\r\n\r\n  Given two straight line data each of the form `[[x1, y1], [x2, y2], ... [xn, yn]]` this method will return an object that contains the intersection points and two \"new line data\" with the intersection point added. (Does not modify the input data!)\r\n  \r\n  If your data is not from a straight line but some chart data, use `getTrendlineData` to generate a straight trendline out of that data using Linear Regression.\r\n  \r\n* **getTrendlineData(data)**\r\n\r\n  Given any linear chart data of the form `[[x1, y1], [x2, y2], ... [xn, yn]]` this method will generate a straight trendline using linear regression.\r\n\r\n## Usage\r\n\r\n### getLineIntersectionData(line1_data, line2_data, user_options)\r\n\r\n**Documentation**\r\n\r\n```javascript\r\n/**\r\n * @param line1_data - Mandatory argument that contains the data of line1 of the form \r\n *                      [[x1, y1], [x2, y2], ... [xn, yn]]\r\n * \r\n * @param line2_data - Mandatory argument that contains the data of line2 of the form \r\n *                      [[x1, y1], [x2, y2], ... [xn, yn]]\r\n * \r\n * @param user_options - Optional argument that is an object containing custom options that overrides the default\r\n *                      behavior of the method. Refer the comments for each option in the opt object for the valid\r\n *                      values for that option.\r\n *\r\n * @returns\r\n * > an object with the following properties\r\n *     icptX - The intersection point X\r\n *     icptY - The intersection point Y\r\n *     line1_data - The new line1 data with intersection point added\r\n *     line2_data - The new line2 data with intersection point added\r\n * > or returns undefined\r\n *     if the lines are parallel,\r\n *     if any of the first two arguments are not in the form [[x1, y1], [x2, y2], ... [xn, yn]]\r\n *     if any of the line data has less than 2 points (it's not a line then)\r\n *     if the user_options argument or any of the options inside it is not in the required format\r\n *     if any callback set in user_options returns false\r\n */\r\n ```\r\n\r\n**Basic example**\r\n```javascript\r\nvar line1 = [[0, 1], [2, 1]];\r\nvar line2 = [[1, 0], [1, 2]];\r\nvar forecast = getLineIntersectionData(line1, line2);\r\nJSON.stringify(forecast)\r\n>> {\"icptX\": 1, \"icptY\": 1, \"line1_data\": [[0,1],[1,1],[2,1]], \"line2_data\": [[1,0],[1,1],[1,2]]}\r\n```\r\n\r\n**Example with chart**\r\n```javascript\r\njQuery(function () {\r\n    var data1 = [[2, 6], [12, 8]];\r\n    var data2 = [[3, 1], [10, 5]];\r\n    \r\n    var forecast = getLineIntersectionData(data1, data2);\r\n    \r\n    var chart_linear = new Highcharts.Chart({\r\n        chart: {\r\n            renderTo: 'container'\r\n        },\r\n        series: [{\r\n            //getLineIntersectionData() may return undefined if lines can not intersect\r\n            data: forecast && forecast.line1_data || data1\r\n        }, {\r\n            data: forecast && forecast.line2_data || data2\r\n        }]\r\n    });\r\n});\r\n```\r\nOutput:\r\n\r\n![Basic chart example](screenshots/getLineIntersectionData_basic_chart_example.png)\r\n\r\n\r\n### getTrendlineData(data)\r\nThe code and this example were extracted from [highcharts_trendline](https://github.com/virtualstaticvoid/highcharts_trendline/tree/65d53dd1ce64648d97a2dbb49444bbb522cec313)\r\n\r\n**Documentation**\r\n```javascript\r\n/** \r\n * @param data - Mandatory argument that contains the chart data of the form \r\n *                 [[x1, y1], [x2, y2], ... [xn, yn]]\r\n *\r\n * @returns an object containing the following properties\r\n *      data - new array containing the data for the straight trendline\r\n *      slope - slope of the trendline\r\n *      intercept - intercept of the trendline\r\n * \r\n */\r\n```\r\n\r\n**Example**\r\n```javascript\r\njQuery(function () {\r\n    // E.g. source data\r\n    var sourceData = [\r\n        [106.4, 271.8], [129.2, 213.4],\r\n        [295.6, 432.3], [154.4, 398.1],\r\n        [129.9, 133.2], [271.5, 432.1],\r\n        [144.0, 134.7], [176.0, 399.2],\r\n        [216.4, 319.2], [194.1, 542.1],\r\n        [435.6, 665.3], [348.5, 435.9]\r\n    ];\r\n\r\n    var chart_linear = new Highcharts.Chart({\r\n        chart: {\r\n            renderTo: 'container'\r\n        },\r\n        series: [{\r\n            type: 'scatter',\r\n            data: sourceData\r\n        }, {\r\n            marker: {\r\n                enabled: false\r\n            },\r\n            /* function returns data for trend-line */\r\n            data: getTrendlineData(sourceData).data\r\n        }]\r\n    });\r\n});\r\n```\r\nOutput:\r\n\r\n![getTrendlineData screenshot 1](screenshots/getTrendlineData_scr1.png)\r\n\r\n**Example using both methods**\r\n```javascript\r\njQuery(function () {\r\n    var data1 = [\r\n        [Date.UTC(2013, 0, 1), 50],\r\n        [Date.UTC(2013, 0, 2), 58],\r\n        [Date.UTC(2013, 0, 3), 58],\r\n        [Date.UTC(2013, 0, 4), 58]\r\n    ];\r\n    var data2 = [\r\n        [Date.UTC(2013, 0, 1), 0],\r\n        [Date.UTC(2013, 0, 2), 12],\r\n        [Date.UTC(2013, 0, 3), 18],\r\n        [Date.UTC(2013, 0, 4), 22]\r\n    ];\r\n    var data1_t = getTrendlineData(data1).data;\r\n    var data2_t = getTrendlineData(data2).data;\r\n    var options = {\r\n        icptPoint: {\r\n            //name: 'Possible release date',\r\n            marker: {\r\n                enabled: true,\r\n                fillColor: '#003300',\r\n                lineColor: '#003300'\r\n            }\r\n        },\r\n        canConvergeLeft: false\r\n    };\r\n    var forecast = getLineIntersectionData(data1_t, data2_t, options);\r\n\r\n    var chart_linear = new Highcharts.Chart({\r\n        chart: {\r\n            renderTo: 'container'\r\n        },\r\n        colors: ['#990000', '#4679BD', '#990000', '#4679BD'],\r\n        xAxis: {\r\n            type: 'datetime',\r\n            gridLineWidth: 1,\r\n            gridLineDashStyle: 'shortdot'\r\n        },\r\n        yAxis: {\r\n            min: 0,\r\n            gridLineDashStyle: 'shortdot'\r\n        },\r\n        title: {\r\n            text: 'Estimating release date'\r\n        },\r\n        series: [{\r\n            name: 'Total issues',\r\n            data: data1\r\n        }, {\r\n            name: 'Closed issues',\r\n            data: data2\r\n        }, {\r\n            name: 'Total issues trend',\r\n            //getLineIntersectionData() may return undefined if lines can not intersect\r\n            data: forecast && forecast.line1_data || data1_t,\r\n            marker: {\r\n                enabled: false\r\n            },\r\n            dashStyle: 'longDash'\r\n        }, {\r\n            name: 'Closed issues trend',\r\n            data: forecast && forecast.line2_data || data2_t,\r\n            marker: {\r\n                enabled: false\r\n            },\r\n            dashStyle: 'longDash',\r\n        }]\r\n    });\r\n});\r\n```\r\n\r\nOutput:\r\n\r\n![Trend forecast](screenshots/trend_forecast.png)\r\n\r\n##Credits\r\n* [virtualstaticvoid/highcharts_trendline](https://github.com/virtualstaticvoid/highcharts_trendline) - The getTrendlineData method is extracted from this library which itself extracted code from [jqplot.trendline.js](http://www.jqplot.com/docs/files/plugins/jqplot-trendline-js.html)\r\n* [John Kiernander](http://stackoverflow.com/a/18850800/883832) - for giving me a groundwork that inspired me to do this\r\n* [Wikipedia](http://en.wikipedia.org/w/index.php?title=Line-line_intersection&oldid=570896016#Mathematics) - for the line intersection formula\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}